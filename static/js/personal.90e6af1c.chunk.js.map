{"version":3,"sources":["views/home/personal/index.js","utils/storage.js","assets/images/head01.gif"],"names":["Personal","inputEle","useRef","history","useHistory","headUrl","getUserInfo","headerUrl","header","useState","setHeaderUrl","logout","a","Dialog","confirm","content","removeUserInfo","replace","onFileChange","e","file","target","files","reader","FileReader","onload","result","setUserInfo","readAsDataURL","className","type","ref","accept","onChange","style","display","Item","onClick","current","dispatchEvent","MouseEvent","key","prefix","src","borderRadius","fit","width","height","description","margin","href","rel","textDecoration","color","background","lineHeight","textAlign","fontSize","marginTop","block","JSON","parse","localStorage","getItem","userinfo","userInfo","setItem","stringify","removeItem","getCollapse","setCollapse","collapse","getActiveTitle","Number","setActiveTitle","id","getViewPos","articleId","posObj","setViewPos","pos","name","percent","rest","curPercent","newObj","removeViewPos","oPosObj","getHistory","setHistory","option","oList","idx","findIndex","item","splice","list","removeHistory","newList","filter","clearHistory","module","exports"],"mappings":"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","file":"static/js/personal.90e6af1c.chunk.js","sourcesContent":["import { Button, Dialog, Image, List } from \"antd-mobile\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { getUserInfo, removeUserInfo, setUserInfo } from \"../../../utils/storage\";\r\n\r\nimport header from \"../../../assets/images/head01.gif\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Personal = () => {\r\n  const inputEle = useRef(null);\r\n  const history = useHistory();\r\n  const userInfo = getUserInfo();\r\n  const headUrl = userInfo.headerUrl || header;\r\n  const [headerUrl, setHeaderUrl] = useState(headUrl);\r\n\r\n  const logout = async () => {\r\n    const res = await Dialog.confirm({ content: \"确认退出吗?\" });\r\n    if (res) {\r\n      removeUserInfo();\r\n      history.replace(\"/login\");\r\n    }\r\n  };\r\n\r\n  const onSelectFile = () => {\r\n    inputEle.current.dispatchEvent(new MouseEvent(\"click\"));\r\n  };\r\n\r\n  const onFileChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setHeaderUrl(reader.result);\r\n      setUserInfo({ headerUrl: reader.result });\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-col just-between ui-h-100\">\r\n      <input type=\"file\" ref={inputEle} accept={\"image/*\"} onChange={onFileChange} style={{ display: \"none\" }} />\r\n      <div>\r\n        <List header=\"联系\">\r\n          <List.Item\r\n            onClick={onSelectFile}\r\n            key={\"hailen\"}\r\n            prefix={<Image src={headerUrl} style={{ borderRadius: 20 }} fit=\"cover\" width={40} height={40} />}\r\n            description={\"联系QQ: 759430324\"}\r\n          >\r\n            Hailen\r\n          </List.Item>\r\n        </List>\r\n        <div style={{ margin: \"50px 10px 0\" }}>\r\n          <a\r\n            href=\"http://wpa.qq.com/msgrd?v=3&uin=759430324&site=qq&menu=yes\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            style={{\r\n              textDecoration: \"none\",\r\n              display: \"inline-block\",\r\n              width: \"100%\",\r\n              color: \"#fff\",\r\n              background: \"#1684ff\",\r\n              lineHeight: \"38px\",\r\n              textAlign: \"center\",\r\n              borderRadius: \"4px\",\r\n              height: \"38px\",\r\n              fontSize: \"16px\",\r\n            }}\r\n          >\r\n            联系Hailen\r\n          </a>\r\n          <a\r\n            href=\"https://qm.qq.com/cgi-bin/qm/qr?k=2owhPlBhOmMZZxp_DITsLwA30f-_xCfx&authKey=A/99MHT/hWGrWgT5EO+n9lygW7c8yt8LSWyJ1qM5Nw4TN1UzvsYtlXhddmtF4FAu&noverify=0\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            style={{\r\n              textDecoration: \"none\",\r\n              display: \"inline-block\",\r\n              width: \"100%\",\r\n              color: \"#fff\",\r\n              background: \"#1684ff\",\r\n              lineHeight: \"38px\",\r\n              textAlign: \"center\",\r\n              borderRadius: \"4px\",\r\n              height: \"38px\",\r\n              fontSize: \"16px\",\r\n              marginTop: \"20px\",\r\n            }}\r\n          >\r\n            添加进群\r\n          </a>\r\n\r\n          <Button block color=\"danger\" style={{ marginTop: \"20px\" }} onClick={logout}>\r\n            退出\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Personal;\r\n","const __userinfo = \"__userinfo__\";\nconst __collapse = \"__collapse__\";\nconst __activeKey = \"__activeKey__\";\nconst __view_pos = \"__view_pos__\";\nconst __history = \"__history__\";\n\n/** ==================== 保存用户名和密码 ==================== */\nexport const getUserInfo = () => JSON.parse(localStorage.getItem(__userinfo) || \"{}\");\nexport const setUserInfo = (userinfo) => {\n  const userInfo = getUserInfo();\n  localStorage.setItem(__userinfo, JSON.stringify({ ...userInfo, ...userinfo }));\n};\nexport const removeUserInfo = () => localStorage.removeItem(__userinfo);\n\n/** ==================== 保存菜单展开 ==================== */\nexport const getCollapse = () => localStorage.getItem(__collapse) || null;\nexport const setCollapse = (collapse) => {\n  const col = localStorage.setItem(__collapse, collapse);\n  return col;\n};\n\nexport const removeCollapse = () => localStorage.removeItem(__collapse);\n\n/** ==================== 保存点击的文章id ==================== */\nexport const getActiveTitle = () => Number(localStorage.getItem(__activeKey));\nexport const setActiveTitle = (id) => localStorage.setItem(__activeKey, id);\nexport const removeActiveTitle = () => localStorage.removeItem(__activeKey);\n\n/** ==================== 保存浏览位置 ==================== */\nexport const getViewPos = (articleId) => {\n  const posObj = JSON.parse(localStorage.getItem(__view_pos) || \"{}\");\n  const res = articleId ? posObj[articleId] : posObj;\n  return res;\n};\n\nexport const setViewPos = ({ id, pos, name, percent, ...rest }) => {\n  const posObj = getViewPos();\n  let curPercent = posObj.percent || 0;\n  if (percent > curPercent) curPercent = percent;\n\n  const newObj = {\n    ...posObj,\n    [id]: { pos, name, ...rest, percent: curPercent },\n  };\n  localStorage.setItem(__view_pos, JSON.stringify(newObj));\n};\n\nexport const removeViewPos = (id) => {\n  // localStorage.removeItem(__view_pos);\n  const oPosObj = getViewPos();\n  delete oPosObj[id];\n  localStorage.setItem(__view_pos, JSON.stringify(oPosObj));\n};\n\n/** ==================== 存储浏览历史 ==================== */\nexport const getHistory = () => {\n  const oList = JSON.parse(localStorage.getItem(__history) || \"[]\");\n  return oList;\n};\n\nexport const setHistory = (option) => {\n  const oList = getHistory();\n  const idx = oList.findIndex((item) => item.id === option.id);\n  if (idx > -1) {\n    oList.splice(idx, 1);\n  }\n  const list = [option, ...oList];\n  localStorage.setItem(__history, JSON.stringify(list));\n};\n\nexport const removeHistory = (id) => {\n  const oList = getHistory();\n  const newList = oList.filter((item) => item.id !== id);\n  localStorage.setItem(__history, JSON.stringify(newList));\n  return newList;\n};\nexport const clearHistory = () => localStorage.removeItem(__history);\n","module.exports = __webpack_public_path__ + \"static/media/head01.0a5c6927.gif\";"],"sourceRoot":""}