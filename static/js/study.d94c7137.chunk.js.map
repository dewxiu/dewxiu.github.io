{"version":3,"sources":["../node_modules/antd-mobile-icons/es/DeleteOutline.js","views/home/study/index.js"],"names":["props","Object","assign","width","height","viewBox","xmlns","xmlnsXlink","style","verticalAlign","className","filter","Boolean","join","id","stroke","strokeWidth","fill","fillRule","d","Study","history","useHistory","userHistory","getHistory","useState","historyList","setHistoryList","showButton","setShowButton","useEffect","onJump","item","push","link","onSearch","throttle","e","value","target","x","f","name","indexOf","title","onCancel","onDelete","a","stopPropagation","preventDefault","Dialog","confirm","content","removeHistory","onClear","clearHistory","onRefresh","sleep","extra","color","size","onClick","margin","placeholder","onBlur","showCancelButton","length","description","minHeight","map","index","Item","key","bind","padding","bigTitle","fontWeight","cate","formatDate","time"],"mappings":"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","file":"static/js/study.d94c7137.chunk.js","sourcesContent":["import * as React from \"react\";\n\nfunction DeleteOutline(props) {\n  return (\n    /*#__PURE__*/\n    React.createElement(\"svg\", Object.assign({\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 48 48\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\"\n    }, props, {\n      style: Object.assign({\n        verticalAlign: '-0.125em'\n      }, props.style),\n      className: ['antd-mobile-icon', props.className].filter(Boolean).join(' ')\n    }),\n    /*#__PURE__*/\n    React.createElement(\"title\", null, \"7C336218-72B0-41E5-89BB-41C2491F1AB6@2x\"),\n    /*#__PURE__*/\n    React.createElement(\"g\", {\n      id: \"DeleteOutline-DeleteOutline\",\n      stroke: \"none\",\n      strokeWidth: 1,\n      fill: \"none\",\n      fillRule: \"evenodd\"\n    },\n    /*#__PURE__*/\n    React.createElement(\"g\", {\n      fill: \"currentColor\",\n      fillRule: \"nonzero\",\n      id: \"DeleteOutline-\\u5F62\\u72B6\\u7ED3\\u5408\"\n    },\n    /*#__PURE__*/\n    React.createElement(\"path\", {\n      d: \"M33,3 C34.6568542,3 36,4.34314575 36,6 L36,9 L42.6,9 C42.8209139,9 43,9.1790861 43,9.4 L43,11.6 C43,11.8209139 42.8209139,12 42.6,12 L41,12 L41,39 C41,42.3137085 38.3137085,45 35,45 L13,45 C9.6862915,45 7,42.3137085 7,39 L7,12 L5.4,12 C5.1790861,12 5,11.8209139 5,11.6 L5,9.4 C5,9.1790861 5.1790861,9 5.4,9 L12,9 L12,6 C12,4.34314575 13.3431458,3 15,3 L33,3 Z M38,12 L10,12 L10,39 C10,40.5976809 11.24892,41.9036609 12.8237272,41.9949073 L13,42 L35,42 C36.5976809,42 37.9036609,40.75108 37.9949073,39.1762728 L38,39 L38,12 Z M19.6,18 C19.8209139,18 20,18.1790861 20,18.4 L20,35.6 C20,35.8209139 19.8209139,36 19.6,36 L17.4,36 C17.1790861,36 17,35.8209139 17,35.6 L17,18.4 C17,18.1790861 17.1790861,18 17.4,18 L19.6,18 Z M31.6,18 C31.8209139,18 32,18.1790861 32,18.4 L32,35.6 C32,35.8209139 31.8209139,36 31.6,36 L29.4,36 C29.1790861,36 29,35.8209139 29,35.6 L29,18.4 C29,18.1790861 29.1790861,18 29.4,18 L31.6,18 Z M33,6 L15,6 L15,9 L33,9 L33,6 Z\"\n    }))))\n  );\n}\n\nexport default DeleteOutline;","import {\r\n  Button,\r\n  Card,\r\n  Dialog,\r\n  Empty,\r\n  List,\r\n  PullToRefresh,\r\n  SearchBar,\r\n} from \"antd-mobile\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  clearHistory,\r\n  getHistory,\r\n  removeHistory,\r\n} from \"../../../utils/storage\";\r\nimport { formatDate, throttle } from \"../../../utils\";\r\n\r\nimport { DeleteOutline } from \"antd-mobile-icons\";\r\nimport { sleep } from \"antd-mobile/es/utils/sleep\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Study = () => {\r\n  const history = useHistory();\r\n  const userHistory = getHistory();\r\n  const [historyList, setHistoryList] = useState(() => userHistory);\r\n  const [showButton, setShowButton] = useState(true);\r\n  useEffect(() => {\r\n    setShowButton(true);\r\n  }, []);\r\n\r\n  const onJump = (item) => {\r\n    history.push(item.link);\r\n  };\r\n  const onSearch = throttle((e) => {\r\n    const value = e.target.value;\r\n    setHistoryList((x) => {\r\n      setShowButton(false);\r\n      return x.filter((f) => {\r\n        const s =\r\n          (f.name && f.name.indexOf(value) > -1) ||\r\n          (f.title && f.title.indexOf(value) > -1);\r\n        return s;\r\n      });\r\n    });\r\n  }, 2000);\r\n\r\n  const onCancel = (e) => {\r\n    setHistoryList(userHistory);\r\n  };\r\n\r\n  const onDelete = async (item, e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const res = await Dialog.confirm({ content: \"确认删除吗?\" });\r\n    if (res) {\r\n      removeHistory(item.id);\r\n      setHistoryList((x) => x.filter((f) => f.id !== item.id));\r\n    }\r\n  };\r\n\r\n  const onStart = () => {\r\n    history.push(\"/home/index\");\r\n  };\r\n\r\n  const onClear = async () => {\r\n    const res = await Dialog.confirm({ content: \"确认清空历史记录吗?\" });\r\n    if (res) {\r\n      setHistoryList([]);\r\n      clearHistory();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <PullToRefresh\r\n        onRefresh={async () => {\r\n          await sleep(1000);\r\n          setHistoryList(getHistory());\r\n        }}\r\n      >\r\n        <Card\r\n          title=\"历史记录\"\r\n          extra={\r\n            <Button color=\"danger\" size=\"small\" onClick={onClear}>\r\n              清空历史\r\n            </Button>\r\n          }\r\n        >\r\n          <div style={{ margin: \"5px 0 10px\" }} className=\"flex just-between\">\r\n            <SearchBar\r\n              placeholder=\"请输入内容\"\r\n              onSearch={onSearch}\r\n              onBlur={onSearch}\r\n              onClear={onCancel}\r\n              onCancel={onCancel}\r\n              className=\"flex-1\"\r\n              showCancelButton={() => true}\r\n            />\r\n          </div>\r\n          {historyList.length === 0 ? (\r\n            <div\r\n              className=\"flex-col align-center just-center\"\r\n              style={{ height: \"70%\" }}\r\n            >\r\n              <Empty description=\"暂无学习记录~\" />\r\n              {showButton ? (\r\n                <div className=\"ui-ta-c\">\r\n                  <Button color=\"primary\" className=\"mt20\" onClick={onStart}>\r\n                    开始学习\r\n                  </Button>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          ) : (\r\n            <List style={{ minHeight: \"100vh\" }}>\r\n              {historyList.map((item, index) => (\r\n                <List.Item key={index}>\r\n                  <div onClick={onJump.bind(null, item)}>\r\n                    <div className=\"flex just-between align-center\">\r\n                      <h4\r\n                        style={{ padding: 0, width: \"75%\" }}\r\n                        className=\"ellipsis\"\r\n                      >\r\n                        {item.bigTitle}\r\n                      </h4>\r\n                      <DeleteOutline\r\n                        onClick={onDelete.bind(null, item)}\r\n                        style={{ padding: \"0 5px\" }}\r\n                      />\r\n                    </div>\r\n                    <h6\r\n                      style={{ fontWeight: 400, width: \"90%\" }}\r\n                      className=\"ellipsis fz14 mt5\"\r\n                    >\r\n                      {item.name}\r\n                    </h6>\r\n                    <div className=\"flex just-between mt10\">\r\n                      <div\r\n                        className=\"fz12\"\r\n                        style={{\r\n                          color: item.cate === \"简答题\" ? \"#f60\" : \"#3134eb\",\r\n                        }}\r\n                      >\r\n                        {item.cate}\r\n                      </div>\r\n                      <div\r\n                        className=\"word-nowrap fz12\"\r\n                        style={{ color: \"#99a2aa\" }}\r\n                      >\r\n                        {formatDate(item.time)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </List.Item>\r\n              ))}\r\n            </List>\r\n          )}\r\n        </Card>\r\n      </PullToRefresh>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Study;\r\n"],"sourceRoot":""}