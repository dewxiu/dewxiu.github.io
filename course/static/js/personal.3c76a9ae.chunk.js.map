{"version":3,"sources":["utils/storage.js","assets/images/header.png","assets/images/head01.gif","views/home/personal/index.js"],"names":["getUserInfo","JSON","parse","localStorage","getItem","setUserInfo","userinfo","userInfo","setItem","stringify","removeUserInfo","removeItem","getViewPos","articleId","posObj","setViewPos","id","pos","name","percent","rest","curPercent","newObj","removeViewPos","oPosObj","getHistory","removeHistory","newList","filter","item","clearHistory","module","exports","Personal","inputEle","useRef","history","useHistory","useState","header","userHeaderUrl","setUserHeadUrl","useEffect","userHeader","logout","a","Dialog","confirm","content","replace","onFileChange","e","file","target","files","reader","FileReader","onload","result","readAsDataURL","className","type","ref","accept","onChange","style","display","Item","key","prefix","src","borderRadius","fit","width","height","description","onClick","current","dispatchEvent","MouseEvent","username","margin","href","rel","textDecoration","color","background","lineHeight","textAlign","fontSize","marginTop","block"],"mappings":"s/BAAA,IAOaA,EAAc,kBAAMC,KAAKC,MAAMC,aAAaC,QAPtC,iBAO6D,OACnEC,EAAc,SAACC,GAC1B,IAAMC,EAAWP,IACjBG,aAAaK,QAVI,eAUgBP,KAAKQ,UAAL,KAAoBF,EAApB,GAAiCD,MAEvDI,EAAiB,kBAAMP,aAAaQ,WAZ9B,iBA6BNC,EAAa,SAACC,GACzB,IAAMC,EAASb,KAAKC,MAAMC,aAAaC,QA3BtB,iBA2B6C,MAE9D,OADYS,EAAYC,EAAOD,GAAaC,GAIjCC,EAAa,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,GAAIC,EAAkC,EAAlCA,IAAKC,EAA6B,EAA7BA,KAAMC,EAAuB,EAAvBA,QAAYC,EAAW,6CAC3DN,EAASF,IACXS,EAAaP,EAAOK,SAAW,EAC/BA,EAAUE,IAAYA,EAAaF,GAEvC,IAAMG,EAAM,KACPR,EADO,eAETE,EAFS,GAEFC,MAAKC,QAASE,EAFZ,CAEkBD,QAASE,MAEvClB,aAAaK,QAzCI,eAyCgBP,KAAKQ,UAAUa,KAGrCC,EAAgB,SAACP,GAE5B,IAAMQ,EAAUZ,WACTY,EAAQR,GACfb,aAAaK,QAhDI,eAgDgBP,KAAKQ,UAAUe,KAIrCC,EAAa,WAExB,OADcxB,KAAKC,MAAMC,aAAaC,QApDtB,gBAoD4C,OAcjDsB,EAAgB,SAACV,GAC5B,IACMW,EADQF,IACQG,QAAO,SAACC,GAAD,OAAUA,EAAKb,KAAOA,KAEnD,OADAb,aAAaK,QArEG,cAqEgBP,KAAKQ,UAAUkB,IACxCA,GAEIG,EAAe,kBAAM3B,aAAaQ,WAxE7B,iB,oBCJlBoB,EAAOC,QAAU,IAA0B,oC,oBCA3CD,EAAOC,QAAU,IAA0B,oC,wJCgH5BC,UAxGE,WACf,IAAMC,EAAWC,iBAAO,MAClBC,EAAUC,cAFK,EAGmBC,mBAASC,KAH5B,mBAGdC,EAHc,KAGCC,EAHD,KAIflC,EAAWP,cACjB0C,qBAAU,WACRD,EAAelC,EAASiC,eAAiBG,OACxC,CAACpC,IAEJ,IAAMqC,EAAM,uCAAG,sBAAAC,EAAA,sEACKC,IAAOC,QAAQ,CAAEC,QAAS,oCAD/B,gBAGXtC,cACA0B,EAAQa,QAAQ,WAJL,2CAAH,qDAYNC,EAAY,uCAAG,WAAOC,GAAP,iBAAAN,EAAA,sDACbO,EAAOD,EAAEE,OAAOC,MAAM,IACtBC,EAAS,IAAIC,YACZC,OAAS,SAACN,GACfV,EAAec,EAAOG,QACtBrD,YAAY,CAAEmC,cAAee,EAAOG,UAEtCH,EAAOI,cAAcP,GAPF,2CAAH,sDAUlB,OACE,yBAAKQ,UAAU,kCACb,2BAAOC,KAAK,OAAOC,IAAK5B,EAAU6B,OAAQ,UAAWC,SAAUd,EAAce,MAAO,CAAEC,QAAS,UAC/F,6BACE,kBAAC,IAAD,CAAM3B,OAAO,gBACX,kBAAC,IAAK4B,KAAN,CACEC,IAAK,SACLC,OAAQ,kBAAC,IAAD,CAAOC,IAAK/B,IAAQ0B,MAAO,CAAEM,aAAc,IAAMC,IAAI,QAAQC,MAAO,GAAIC,OAAQ,KACxFC,YAAa,6BAHf,WAQF,kBAAC,IAAD,CAAMpC,OAAO,gBACX,kBAAC,IAAK4B,KAAN,CACES,QA7BW,WACnB1C,EAAS2C,QAAQC,cAAc,IAAIC,WAAW,WA6BtCX,IAAK,SACLC,OAAQ,kBAAC,IAAD,CAAOC,IAAK9B,EAAeyB,MAAO,CAAEM,aAAc,IAAMC,IAAI,QAAQC,MAAO,GAAIC,OAAQ,KAC/FC,YAAa,4BAEZpE,EAASyE,WAGd,yBAAKf,MAAO,CAAEgB,OAAQ,gBACpB,uBACEC,KAAK,6DACL7B,OAAO,SACP8B,IAAI,sBACJlB,MAAO,CACLmB,eAAgB,OAChBlB,QAAS,eACTO,MAAO,OACPY,MAAO,OACPC,WAAY,UACZC,WAAY,OACZC,UAAW,SACXjB,aAAc,MACdG,OAAQ,OACRe,SAAU,SAdd,sBAmBA,uBACEP,KAAK,yJACL7B,OAAO,SACP8B,IAAI,sBACJlB,MAAO,CACLmB,eAAgB,OAChBlB,QAAS,eACTO,MAAO,OACPY,MAAO,OACPC,WAAY,UACZC,WAAY,OACZC,UAAW,SACXjB,aAAc,MACdG,OAAQ,OACRe,SAAU,OACVC,UAAW,SAff,4BAqBA,kBAAC,IAAD,CAAQC,OAAK,EAACN,MAAM,SAASpB,MAAO,CAAEyB,UAAW,QAAUd,QAAShC,GAApE,qB","file":"static/js/personal.3c76a9ae.chunk.js","sourcesContent":["const __userinfo = \"__userinfo__\";\nconst __collapse = \"__collapse__\";\nconst __activeKey = \"__activeKey__\";\nconst __view_pos = \"__view_pos__\";\nconst __history = \"__history__\";\n\n/** ==================== 保存用户名和密码 ==================== */\nexport const getUserInfo = () => JSON.parse(localStorage.getItem(__userinfo) || \"{}\");\nexport const setUserInfo = (userinfo) => {\n  const userInfo = getUserInfo();\n  localStorage.setItem(__userinfo, JSON.stringify({ ...userInfo, ...userinfo }));\n};\nexport const removeUserInfo = () => localStorage.removeItem(__userinfo);\n\n/** ==================== 保存菜单展开 ==================== */\nexport const getCollapse = () => localStorage.getItem(__collapse) || null;\nexport const setCollapse = (collapse) => {\n  const col = localStorage.setItem(__collapse, collapse);\n  return col;\n};\n\nexport const removeCollapse = () => localStorage.removeItem(__collapse);\n\n/** ==================== 保存点击的文章id ==================== */\nexport const getActiveTitle = () => Number(localStorage.getItem(__activeKey));\nexport const setActiveTitle = (id) => localStorage.setItem(__activeKey, id);\nexport const removeActiveTitle = () => localStorage.removeItem(__activeKey);\n\n/** ==================== 保存浏览位置 ==================== */\nexport const getViewPos = (articleId) => {\n  const posObj = JSON.parse(localStorage.getItem(__view_pos) || \"{}\");\n  const res = articleId ? posObj[articleId] : posObj;\n  return res;\n};\n\nexport const setViewPos = ({ id, pos, name, percent, ...rest }) => {\n  const posObj = getViewPos();\n  let curPercent = posObj.percent || 0;\n  if (percent > curPercent) curPercent = percent;\n\n  const newObj = {\n    ...posObj,\n    [id]: { pos, name, ...rest, percent: curPercent },\n  };\n  localStorage.setItem(__view_pos, JSON.stringify(newObj));\n};\n\nexport const removeViewPos = (id) => {\n  // localStorage.removeItem(__view_pos);\n  const oPosObj = getViewPos();\n  delete oPosObj[id];\n  localStorage.setItem(__view_pos, JSON.stringify(oPosObj));\n};\n\n/** ==================== 存储浏览历史 ==================== */\nexport const getHistory = () => {\n  const oList = JSON.parse(localStorage.getItem(__history) || \"[]\");\n  return oList;\n};\n\nexport const setHistory = (option) => {\n  const oList = getHistory();\n  const idx = oList.findIndex((item) => item.id === option.id);\n  if (idx > -1) {\n    oList.splice(idx, 1);\n  }\n  const list = [option, ...oList];\n  localStorage.setItem(__history, JSON.stringify(list));\n};\n\nexport const removeHistory = (id) => {\n  const oList = getHistory();\n  const newList = oList.filter((item) => item.id !== id);\n  localStorage.setItem(__history, JSON.stringify(newList));\n  return newList;\n};\nexport const clearHistory = () => localStorage.removeItem(__history);\n","module.exports = __webpack_public_path__ + \"static/media/header.0e6a6d25.png\";","module.exports = __webpack_public_path__ + \"static/media/head01.0a5c6927.gif\";","import { Button, Dialog, Image, List } from \"antd-mobile\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { getUserInfo, removeUserInfo, setUserInfo } from \"../../../utils/storage\";\r\n\r\nimport header from \"../../../assets/images/header.png\";\r\nimport { useHistory } from \"react-router\";\r\nimport userHeader from \"../../../assets/images/head01.gif\";\r\n\r\nconst Personal = () => {\r\n  const inputEle = useRef(null);\r\n  const history = useHistory();\r\n  const [userHeaderUrl, setUserHeadUrl] = useState(header);\r\n  const userInfo = getUserInfo();\r\n  useEffect(() => {\r\n    setUserHeadUrl(userInfo.userHeaderUrl || userHeader);\r\n  }, [userInfo]);\r\n\r\n  const logout = async () => {\r\n    const res = await Dialog.confirm({ content: \"确认退出吗?\" });\r\n    if (res) {\r\n      removeUserInfo();\r\n      history.replace(\"/login\");\r\n    }\r\n  };\r\n\r\n  const onSelectFile = () => {\r\n    inputEle.current.dispatchEvent(new MouseEvent(\"click\"));\r\n  };\r\n\r\n  const onFileChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setUserHeadUrl(reader.result);\r\n      setUserInfo({ userHeaderUrl: reader.result });\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-col just-between ui-h-100\">\r\n      <input type=\"file\" ref={inputEle} accept={\"image/*\"} onChange={onFileChange} style={{ display: \"none\" }} />\r\n      <div>\r\n        <List header=\"站长\">\r\n          <List.Item\r\n            key={\"hailen\"}\r\n            prefix={<Image src={header} style={{ borderRadius: 20 }} fit=\"cover\" width={40} height={40} />}\r\n            description={\"联系QQ: 759430324\"}\r\n          >\r\n            Hailen\r\n          </List.Item>\r\n        </List>\r\n        <List header=\"我的\">\r\n          <List.Item\r\n            onClick={onSelectFile}\r\n            key={\"hailen\"}\r\n            prefix={<Image src={userHeaderUrl} style={{ borderRadius: 20 }} fit=\"cover\" width={40} height={40} />}\r\n            description={\"当前登录\"}\r\n          >\r\n            {userInfo.username}\r\n          </List.Item>\r\n        </List>\r\n        <div style={{ margin: \"50px 10px 0\" }}>\r\n          <a\r\n            href=\"http://wpa.qq.com/msgrd?v=3&uin=759430324&site=qq&menu=yes\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            style={{\r\n              textDecoration: \"none\",\r\n              display: \"inline-block\",\r\n              width: \"100%\",\r\n              color: \"#fff\",\r\n              background: \"#1684ff\",\r\n              lineHeight: \"38px\",\r\n              textAlign: \"center\",\r\n              borderRadius: \"4px\",\r\n              height: \"38px\",\r\n              fontSize: \"16px\",\r\n            }}\r\n          >\r\n            联系Hailen\r\n          </a>\r\n          <a\r\n            href=\"https://qm.qq.com/cgi-bin/qm/qr?k=2owhPlBhOmMZZxp_DITsLwA30f-_xCfx&authKey=A/99MHT/hWGrWgT5EO+n9lygW7c8yt8LSWyJ1qM5Nw4TN1UzvsYtlXhddmtF4FAu&noverify=0\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            style={{\r\n              textDecoration: \"none\",\r\n              display: \"inline-block\",\r\n              width: \"100%\",\r\n              color: \"#fff\",\r\n              background: \"#1684ff\",\r\n              lineHeight: \"38px\",\r\n              textAlign: \"center\",\r\n              borderRadius: \"4px\",\r\n              height: \"38px\",\r\n              fontSize: \"16px\",\r\n              marginTop: \"20px\",\r\n            }}\r\n          >\r\n            添加进群\r\n          </a>\r\n\r\n          <Button block color=\"danger\" style={{ marginTop: \"20px\" }} onClick={logout}>\r\n            退出\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Personal;\r\n"],"sourceRoot":""}