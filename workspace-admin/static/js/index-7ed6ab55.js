import{e as N,r as u,f as z,h as O,q as f,o as i,c as d,a3 as j,a4 as E,b as R,m,F as Z,i as D,j as q,C as x,t as g,w as F,l as A,J,ay as P,H as U,az as W,_ as G}from"./index-e18d8825.js";import{d as Q}from"./search-cc37b371.js";const se={width:1024,height:1024,body:'<path fill="currentColor" d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"/>'},re={width:1024,height:1024,body:'<path fill="currentColor" d="m199.04 672.64l193.984 112l224-387.968l-193.92-112l-224 388.032zm-23.872 60.16l32.896 148.288l144.896-45.696L175.168 732.8zM455.04 229.248l193.92 112l56.704-98.112l-193.984-112l-56.64 98.112zM104.32 708.8l384-665.024l304.768 175.936L409.152 884.8h.064l-248.448 78.336L104.32 708.8zm384 254.272v-64h448v64h-448z"/>'},ce={width:24,height:24,body:'<path fill="currentColor" d="M11 11V7h2v4h4v2h-4v4h-2v-4H7v-2h4Zm1 11C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10Zm0-2a8 8 0 1 0 0-16a8 8 0 0 0 0 16Z"/>'},X={class:"filter-field"},Y={key:0},ee={key:1},ae={key:2},le={key:0,class:"filterTitle"},te=N({name:"MySearch",__name:"index",props:{placeholder:{type:String,default:"请输入搜索内容"},searchField:{type:String,default:"search"},options:{type:Array,default:()=>[]},default:{type:Object,default:()=>{}}},emits:["tagSearch"],setup(v,{emit:y}){const n=v,C=u(),k=u(),b=u(!1),t=u(""),V=u(""),o=u(""),r=u(n.default||{}),S=z(()=>{if(!t.value)return"";for(const e of n.options)if(e.value===t.value)return e==null?void 0:e.label;return""}),h=z(()=>{const e={};for(let a in r.value){const l=r.value[a].value;a===""&&(a=n.searchField),a.startsWith(n.searchField)?e[n.searchField]=(e[n.searchField]?e[n.searchField]+",":"")+l:e[a]=l}return e}),L=z(()=>b.value&&t.value?"按下Enter键进行搜索":n.placeholder);O(()=>{const e=setTimeout(()=>{Object.keys(h).length>0&&y("tagSearch",h),clearTimeout(e)},400)});const w=(e,a)=>{for(const l of n.options)if(!(l.value!==e||!l.children)){for(const c of l.children)if(c.value===a)return c.label}return""},M=e=>{!e||e.length===0||(e.length===1?(t.value=e[0],C.value.focus()):e.length===2&&(t.value=e[0],o.value=e[1],V.value=w(e[0],e[1]),p()),U(()=>{var a,l;(l=(a=k.value)==null?void 0:a.cascaderPanelRef)==null||l.clearCheckedNodes()}))},T=e=>{delete r.value[e],y("tagSearch",h)},p=()=>{if(o.value===""){delete r.value[t.value],t.value="";return}o.value&&!t.value&&(t.value=n.searchField+"_"+o.value);const e={key:t.value,label:S.value,value:o.value,valueLabel:V.value};r.value[t.value]=e,y("tagSearch",h),t.value="",o.value="",V.value=""},B=(e,a)=>{let l=!1;for(const c of n.options)c.value===a.key&&c.readonly&&(l=!0);if(l){W({message:"当前选项不可编辑",type:"warning"});return}o.value.length!==0&&p(),delete r.value[e],t.value=a.key,o.value=a.value,C.value.focus()};return(e,a)=>{const l=f("el-cascader"),c=f("el-tag"),I=f("IconifyIconOffline"),$=f("el-icon"),H=f("el-input");return i(),d("div",X,[j(R("div",null,[m(l,{ref_key:"CascaderRef",ref:k,options:v.options,props:{expandTrigger:"hover"},onChange:M},null,8,["options"])],512),[[E,v.options.length>0]]),(i(!0),d(Z,null,D(r.value,(s,_)=>(i(),q(c,{key:_,name:_,closable:"",size:"small",class:"filter-tag",type:"info","disable-transitions":!0,onClose:K=>T(_),onClick:K=>B(_,s)},{default:x(()=>[s.label?(i(),d("strong",Y,g(s.label+":"),1)):F("",!0),s.valueLabel?(i(),d("span",ee,g(s.valueLabel),1)):(i(),d("span",ae,g(s.value),1))]),_:2},1032,["name","onClose","onClick"]))),128)),S.value?(i(),d("span",le,g(S.value+":"),1)):F("",!0),m(H,{ref_key:"SearchInput",ref:C,modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value=s),placeholder:L.value,class:J(["search-input",v.options.length<1?"search-input2":""]),"validate-event":!1,onBlur:a[1]||(a[1]=s=>b.value=!1),onFocus:a[2]||(a[2]=s=>b.value=!0),onChange:p,onKeyup:P(p,["enter"])},{suffix:x(()=>[m($,{class:"el-input__icon"},{default:x(()=>[m(I,{icon:A(Q)},null,8,["icon"])]),_:1})]),_:1},8,["modelValue","placeholder","class","onKeyup"])])}}});const ue=G(te,[["__scopeId","data-v-46cb6c9f"]]);export{ue as B,re as a,se as b,ce as d};
