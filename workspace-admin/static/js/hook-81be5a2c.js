import E from"./form-34409b5d.js";import{o as A,d as W,a as z,u as R}from"./orgList-6a75d374.js";import{r as n,S as T,h as L,aG as N,ab as Q,aH as M,az as g}from"./index-e18d8825.js";import{getColumns as p,formConfigs as U}from"./config-b8d8f2b2.js";import"./TitleCate-3b5df917.js";import"./regExp-b8203c09.js";function _(){const u=n(),q=n(),i=n(!0),s=n([]),x=n([]),d=T({total:0,pageSize:10,currentPage:1,background:!0});L(()=>{S()});function h(t){}function f(t){}function k(t){}async function c(){try{i.value=!0;const e=(await A(q.value)).data;x.value=e,d.total=e.length,d.pageSize=100,d.currentPage=1,i.value=!1}catch{s.value=p([])}}async function S(){try{i.value=!0;const e=(await A({})).data;s.value=p(e)}catch{s.value=p([])}}const C=t=>{t&&(t.resetFields(),c())};function D(t,e){const l={add:"添加",edit:"编辑"}[t],m={id:(e==null?void 0:e.id)??"",orgName:(e==null?void 0:e.orgName)??"",shortName:(e==null?void 0:e.shortName)??"",orgCode:(e==null?void 0:e.orgCode)??"",logo:(e==null?void 0:e.logo)??"",orgAddress:(e==null?void 0:e.orgAddress)??"",tel:(e==null?void 0:e.tel)??"",tax:(e==null?void 0:e.tax)??"",status:(e==null?void 0:e.status)??"",kingdeeEnable:(e==null?void 0:e.kingdeeEnable)??"",qywxEnable:(e==null?void 0:e.qywxEnable)??"",qhEnable:(e==null?void 0:e.qhEnable)??"",orgDomain:(e==null?void 0:e.orgDomain)??"",orgDomainPort:(e==null?void 0:e.orgDomainPort)??"",qywxOrgDomain:(e==null?void 0:e.qywxOrgDomain)??"",qywxOrgDomainPort:(e==null?void 0:e.qywxOrgDomainPort)??"",kdApiAcctId:(e==null?void 0:e.kdApiAcctId)??"",kdApiAppId:(e==null?void 0:e.kdApiAppId)??"",kdApiAppSec:(e==null?void 0:e.kdApiAppSec)??"",kdApiLCID:(e==null?void 0:e.kdApiLCID)??"",kdApiServerUrl:(e==null?void 0:e.kdApiServerUrl)??"",kdApiFcreateorgid:(e==null?void 0:e.kdApiFcreateorgid)??"",kdApiFuseorgid:(e==null?void 0:e.kdApiFuseorgid)??"",qhFileHost:(e==null?void 0:e.qhFileHost)??"",qhFileIp:(e==null?void 0:e.qhFileIp)??"",qhFilePort:(e==null?void 0:e.qhFilePort)??"",qhFileUserName:(e==null?void 0:e.qhFileUserName)??"",qhFilePassword:(e==null?void 0:e.qhFilePassword)??"",qywxOauth2url:(e==null?void 0:e.qywxOauth2url)??"",qywxCorpid:(e==null?void 0:e.qywxCorpid)??"",qywxPlmAgentid:(e==null?void 0:e.qywxPlmAgentid)??"",qywxPlmSecret:(e==null?void 0:e.qywxPlmSecret)??"",qywxWorkAgentid:(e==null?void 0:e.qywxWorkAgentid)??"",qywxWorkSecret:(e==null?void 0:e.qywxWorkSecret)??"",qywxWorkComplaintDetailurl:(e==null?void 0:e.qywxWorkComplaintDetailurl)??"",qywxReportAgentid:(e==null?void 0:e.qywxReportAgentid)??"",qywxReportSecret:(e==null?void 0:e.qywxReportSecret)??"",qywxContactsSecret:(e==null?void 0:e.qywxContactsSecret)??"",qywxCCTemplateId:(e==null?void 0:e.qywxCCTemplateId)??"",qywxAppAgentid:(e==null?void 0:e.qywxAppAgentid)??"",qywxAppSecret:(e==null?void 0:e.qywxAppSecret)??"",qywxSToken:(e==null?void 0:e.qywxSToken)??"",qywxSEncodingAESKey:(e==null?void 0:e.qywxSEncodingAESKey)??"",pcQywxCorpid:(e==null?void 0:e.pcQywxCorpid)??"",pcQywxWorkAgentid:(e==null?void 0:e.pcQywxWorkAgentid)??"",pcQywxWorkSecret:(e==null?void 0:e.pcQywxWorkSecret)??""};N({title:`${l}组织`,props:{formInline:m,formConfigs:U(t)},width:"75%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>Q(E,{ref:u}),beforeSure:(a,{options:P})=>{const I=u.value.getRef(),O=P.props.formInline;I.validate(b=>{b&&M.confirm("确认要提交吗?","系统提示",{type:"warning",draggable:!0,cancelButtonText:"取消",confirmButtonText:"确定",dangerouslyUseHTMLString:!0}).then(()=>{F(t,l,O,()=>{a(),c()})}).catch(()=>{})})}})}const F=(t,e,y,l)=>{({add:z,edit:R})[t](y).then(a=>{if(a.status!==200)throw a.message;l(),g.success(`${e}成功`)}).catch(a=>{g.error(a||`${e}失败`)})};function v(t){W({id:t.id}).then(e=>{if(e.status!==200)throw e.message;g.success("删除成功"),c()}).catch(e=>{g.error("删除失败")})}return{formData:q,loading:i,columns:s,dataList:x,pagination:d,onSearch:c,resetForm:C,openDialog:D,handleDelete:v,handleSizeChange:h,handleCurrentChange:f,handleSelectionChange:k}}export{_ as useRole};
